{
  "version": "1.9.3",
  "minAppVersion": 1,
  "updateTime": "2025-12-12",
  "description": "自动记账规则配置文件 - v1.9.3 性能优化，预编译关键词匹配",
  "amountBlacklist": {
    "description": "金额黑名单配置 - 用于过滤误识别的数字（如运营商/银行客服号码）",
    "exact": [
      10086.0, 10010.0, 10000.0,
      95588.0, 95533.0, 95566.0, 95555.0, 95568.0, 95599.0, 95528.0, 95558.0,
      95561.0, 95508.0, 95516.0, 95559.0, 95595.0, 95511.0, 95526.0, 95577.0, 95580.0,
      123456.0
    ],
    "integerPrefixes": [
      10086, 10010, 10000,
      95588, 95533, 95566, 95555, 95568, 95599, 95528, 95558,
      95561, 95508, 95516, 95559, 95595, 95511, 95526, 95577, 95580,
      123456
    ],
    "specialRules": {
      "10000": {
        "description": "10000 是常见整数消费金额，仅精确匹配 10000.0 时过滤",
        "exactMatchOnly": true
      }
    }
  },
  "apps": [
    {
      "packageName": "com.tencent.mm",
      "name": "微信",
      "rules": [
        {
          "type": "expense",
          "triggerKeywords": [
            "支付成功", "付款成功", "已付款", "已支付",
            "免密支付成功", "已扣款", "扣款成功",
            "小额免密支付", "免密支付", "已自动扣款",
            "消费成功", "刷卡成功", "付款完成", "支付完成"
          ],
          "excludeKeywords": ["确认付款", "立即支付", "确认支付", "输入密码", "待支付", "去支付", "请输入", "验证指纹", "验证面容"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "收款方[：:]\\s*(.+?)(?:\\s|$)",
            "商户名称[：:]\\s*(.+?)(?:\\s|$)",
            "商户[：:]\\s*(.+?)(?:\\s|$)",
            "商家[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "微信支付",
          "priority": 10
        },
        {
          "type": "expense",
          "triggerKeywords": [
            "自动扣款成功", "已自动扣费", "自动续费成功", "签约扣款成功", "代扣成功",
            "自动续费", "连续包月", "会员自动续费", "已自动续费"
          ],
          "excludeKeywords": ["开通自动扣款", "签约", "授权", "开通"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "扣款方[：:]\\s*(.+?)(?:\\s|$)",
            "商户[：:]\\s*(.+?)(?:\\s|$)",
            "服务[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "自动扣款",
          "priority": 12
        },
        {
          "type": "expense",
          "triggerKeywords": [
            "红包发送成功", "红包已发送", "红包已发", "发出红包", "发了一个红包", "发了红包",
            "已发送", "发送成功", "已发出", "红包已塞好", "已塞钱", "塞好了", "塞入红包",
            "发红包成功", "红包已发出", "发出了红包", "红包发出成功",
            "共发出", "红包已塞入", "成功发出", "红包发出"
          ],
          "excludeKeywords": ["选择红包个数", "请填写金额", "塞钱进红包", "添加表情", "发多少钱", "发红包", "塞钱"],
          "amountRegex": [
            "共\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [],
          "category": "红包",
          "priority": 25
        },
        {
          "type": "expense",
          "triggerKeywords": [
            "转账成功", "已转账", "转账已发出", "已转出", "转出成功",
            "转账发送成功", "转账完成", "已转给", "转给", "转账已完成"
          ],
          "excludeKeywords": ["确认转账", "转账给朋友", "输入金额", "转账说明", "转账到", "发起转账", "待确认", "输入转账金额", "添加转账说明"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "金额[：:]?\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "转账金额[：:]?\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "转账给\\s*(.{1,20})(?:\\s|$)",
            "收款人[：:]\\s*(.{1,20})(?:\\s|$)",
            "转给\\s*(.{1,20})(?:\\s|$)",
            "收款方[：:]\\s*(.{1,20})(?:\\s|$)"
          ],
          "category": "转账",
          "priority": 15
        },
        {
          "type": "expense",
          "triggerKeywords": [
            "群收款已发起", "发起群收款", "群收款成功", "收款已发起"
          ],
          "excludeKeywords": ["填写金额", "发起收款"],
          "amountRegex": [
            "共\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [],
          "category": "群收款",
          "priority": 14
        },
        {
          "type": "expense",
          "triggerKeywords": [
            "支付分已扣款", "支付分扣款成功", "微信支付分", "先享后付"
          ],
          "excludeKeywords": ["开通支付分", "查看详情", "了解更多"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "商户[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "支付分",
          "priority": 13
        },
        {
          "type": "income",
          "triggerKeywords": [
            "已收钱", "收款成功", "收到转账", "向你转账", "已收款", "转账已收",
            "收钱成功", "到账成功", "已到账", "转账已到账", "转账收款",
            "收到了转账", "已收到转账", "转账到账", "转账入账", "入账成功"
          ],
          "excludeKeywords": [],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "金额[：:]?\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "^(.{1,20})\\s*向你转账",
            "^(.{1,20})\\s*转账给你",
            "付款方[：:]\\s*(.{1,30})(?:\\s|$)",
            "来自\\s*(.{1,30})(?:\\s|$)"
          ],
          "category": "转账",
          "priority": 15
        },
        {
          "type": "income",
          "triggerKeywords": [
            "已领取", "领取了", "红包已存入", "红包到账", "已存入零钱", "收到红包",
            "存入零钱", "你领取了", "领取成功", "红包已领取", "拆红包成功",
            "恭喜发财", "大吉大利", "已存入", "零钱已入账",
            "拆了红包", "抢到红包", "手气最佳", "领了红包", "收了红包", "红包已到账"
          ],
          "excludeKeywords": ["点击领取", "立即领取", "开红包", "看看大家的手气", "拆开红包", "发起红包"],
          "amountRegex": [
            "你领取了\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "领取了\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "已存入\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "^(.{1,20})的红包$",
            "来自\\s*(.{1,20})(?:\\s|$)",
            "(.{1,20})发出的红包",
            "(.{1,20})发的红包",
            "(.{1,20})\\s*发给你"
          ],
          "category": "红包",
          "priority": 20
        },
        {
          "type": "income",
          "triggerKeywords": [
            "二维码收款成功", "收款码收款", "已收款", "扫码收款成功",
            "商家收款", "收款到账"
          ],
          "excludeKeywords": ["设置收款码", "我的收款码"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "付款方[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "二维码收款",
          "priority": 16
        },
        {
          "type": "income",
          "triggerKeywords": [
            "退款成功", "退款到账", "已退款", "退款已到账",
            "退款已存入", "已原路退回", "退款已入账", "退回成功"
          ],
          "excludeKeywords": ["申请退款", "退款中", "等待退款", "退款处理中"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "退款金额[：:]?\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "商户[：:]\\s*(.+?)(?:\\s|$)",
            "退款来源[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "退款",
          "priority": 18
        }
      ]
    },
    {
      "packageName": "com.eg.android.AlipayGphone",
      "name": "支付宝",
      "rules": [
        {
          "type": "expense",
          "triggerKeywords": [
            "支付成功", "付款成功", "交易成功",
            "免密支付成功", "已扣款", "扣款成功", "小额免密",
            "免密支付", "已自动扣款", "极速支付成功"
          ],
          "excludeKeywords": ["确认付款", "立即付款", "确认支付", "输入密码", "待支付", "去付款"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [
            "收款方[：:]\\s*(.{1,30})(?:\\s|$)",
            "商家[：:]\\s*(.{1,30})(?:\\s|$)",
            "商户[：:]\\s*(.{1,30})(?:\\s|$)"
          ],
          "category": "支付宝支付",
          "priority": 10
        },
        {
          "type": "expense",
          "triggerKeywords": [
            "自动扣款成功", "已自动扣费", "自动续费成功", "签约扣款成功", "代扣成功",
            "花呗已还款", "自动还款成功", "已自动还款", "连续包月扣款",
            "订阅扣费成功", "会员续费成功", "扣款已完成", "已成功扣款",
            "周期扣款成功", "定期扣款", "免密代扣", "签约代扣成功"
          ],
          "excludeKeywords": ["开通自动扣款", "签约", "授权", "开通", "管理自动扣款", "关闭自动扣款", "取消授权"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "扣款金额[：:]?\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "扣款方[：:]\\s*(.{1,30})(?:\\s|$)",
            "服务[：:]\\s*(.{1,30})(?:\\s|$)",
            "商户[：:]\\s*(.{1,30})(?:\\s|$)",
            "项目[：:]\\s*(.{1,30})(?:\\s|$)"
          ],
          "category": "自动扣款",
          "priority": 12
        },
        {
          "type": "expense",
          "triggerKeywords": [
            "花呗分期成功", "分期付款成功", "分期支付成功", "已分期",
            "分期已生效", "分期订单已创建"
          ],
          "excludeKeywords": ["选择分期", "分期方案", "去分期"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "总金额[：:]?\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "商家[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "花呗分期",
          "priority": 13
        },
        {
          "type": "expense",
          "triggerKeywords": ["转账成功", "转账已完成", "已转账"],
          "excludeKeywords": ["确认转账", "输入金额"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [
            "收款方[：:]\\s*(.+?)(?:\\s|$)",
            "转账给\\s*(.+?)(?:\\s|$)"
          ],
          "category": "转账",
          "priority": 15
        },
        {
          "type": "expense",
          "triggerKeywords": [
            "余额宝转出成功", "转出到银行卡", "已转出", "提现成功",
            "转出成功", "到账时间"
          ],
          "excludeKeywords": ["确认转出", "输入金额", "转出到"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [],
          "category": "余额宝转出",
          "priority": 14
        },
        {
          "type": "expense",
          "triggerKeywords": [
            "红包已发送", "红包发送成功", "发送成功", "已发送",
            "口令红包已创建", "共发出", "红包已发出"
          ],
          "excludeKeywords": ["填写金额", "红包个数", "选择红包"],
          "amountRegex": [
            "共\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [],
          "category": "红包",
          "priority": 25
        },
        {
          "type": "income",
          "triggerKeywords": ["收款成功", "已到账", "收款到账", "到账成功", "收到转账", "入账成功"],
          "excludeKeywords": [],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [
            "付款方[：:]\\s*(.{1,30})(?:\\s|$)",
            "来自\\s*(.{1,30})(?:\\s|$)"
          ],
          "category": "支付宝收款",
          "priority": 15
        },
        {
          "type": "income",
          "triggerKeywords": [
            "红包到账", "红包已存入", "领取成功", "已领取", "已存入余额",
            "存入余额", "红包已领取", "领取红包成功"
          ],
          "excludeKeywords": ["点击领取", "立即领取", "开红包", "拆红包"],
          "amountRegex": [
            "领取了\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "^(.{1,20})的红包$",
            "来自\\s*(.{1,20})(?:\\s|$)",
            "(.{1,20})发出的红包",
            "(.{1,20})发的红包"
          ],
          "category": "红包",
          "priority": 20
        },
        {
          "type": "income",
          "triggerKeywords": [
            "余额宝收益到账", "收益已到账", "昨日收益", "累计收益",
            "利息到账", "收益发放"
          ],
          "excludeKeywords": [],
          "amountRegex": [
            "\\+([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [],
          "category": "理财收益",
          "priority": 11
        },
        {
          "type": "income",
          "triggerKeywords": [
            "退款成功", "退款到账", "已退款", "退款已到账",
            "退款已入账", "已原路退回", "退回成功", "退款已存入"
          ],
          "excludeKeywords": ["申请退款", "退款中", "等待退款"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "退款金额[：:]?\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "商家[：:]\\s*(.+?)(?:\\s|$)",
            "退款来源[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "退款",
          "priority": 18
        }
      ]
    },
    {
      "packageName": "com.unionpay",
      "name": "云闪付",
      "rules": [
        {
          "type": "expense",
          "triggerKeywords": [
            "支付成功", "交易成功", "付款成功",
            "碰一碰支付成功", "NFC支付成功", "闪付成功", "挥卡成功",
            "免密支付成功", "小额免密", "免密支付",
            "银联支付成功", "银联付款成功", "银联扫码成功",
            "二维码支付成功", "扫码支付成功", "主扫支付成功", "被扫支付成功"
          ],
          "excludeKeywords": ["确认付款", "立即支付", "输入密码", "待支付", "去支付", "扫一扫"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "实付[：:]?\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [
            "商户[：:]\\s*(.{1,30})(?:\\s|$)",
            "收款方[：:]\\s*(.{1,30})(?:\\s|$)",
            "商户名称[：:]\\s*(.{1,30})(?:\\s|$)"
          ],
          "category": "云闪付支付",
          "priority": 10
        },
        {
          "type": "expense",
          "triggerKeywords": ["碰一碰", "NFC支付", "闪付", "挥卡付款", "银联闪付"],
          "excludeKeywords": ["如何使用", "开通", "了解更多"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "商户[：:]\\s*(.{1,30})(?:\\s|$)"
          ],
          "category": "碰一碰",
          "priority": 11
        },
        {
          "type": "expense",
          "triggerKeywords": ["转账成功", "转账已完成", "已转账", "银联转账成功"],
          "excludeKeywords": ["确认转账", "输入金额", "发起转账"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [
            "收款方[：:]\\s*(.{1,30})(?:\\s|$)",
            "转账给\\s*(.{1,20})(?:\\s|$)"
          ],
          "category": "转账",
          "priority": 15
        },
        {
          "type": "expense",
          "triggerKeywords": ["红包已发送", "红包发送成功", "发送成功", "共发出", "银联红包"],
          "excludeKeywords": ["填写金额", "红包个数", "发红包"],
          "amountRegex": [
            "共\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [],
          "category": "红包",
          "priority": 25
        },
        {
          "type": "income",
          "triggerKeywords": ["收款成功", "到账成功", "已到账", "收到转账", "入账成功", "银联收款成功"],
          "excludeKeywords": [],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [
            "付款方[：:]\\s*(.{1,30})(?:\\s|$)",
            "来自\\s*(.{1,30})(?:\\s|$)"
          ],
          "category": "云闪付收款",
          "priority": 10
        },
        {
          "type": "income",
          "triggerKeywords": ["红包到账", "红包已存入", "领取成功", "已领取", "红包已领取", "银联红包到账"],
          "excludeKeywords": ["点击领取", "立即领取", "拆红包"],
          "amountRegex": [
            "领取了\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "(.{1,20})的红包",
            "来自\\s*(.{1,20})(?:\\s|$)"
          ],
          "category": "红包",
          "priority": 20
        },
        {
          "type": "income",
          "triggerKeywords": [
            "退款成功", "退款到账", "已退款", "退款已到账",
            "退回成功", "已原路退回", "银联退款成功"
          ],
          "excludeKeywords": ["申请退款", "退款中", "等待退款"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "退款金额[：:]?\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "商户[：:]\\s*(.{1,30})(?:\\s|$)",
            "退款来源[：:]\\s*(.{1,30})(?:\\s|$)"
          ],
          "category": "退款",
          "priority": 18
        }
      ]
    }
  ],
  "commonPatterns": {
    "excludePatterns": [
      "^\\d{1,2}[:.:]\\d{2}$"
    ],
    "maxAmount": 50000,
    "minAmount": 0.01
  }
}
