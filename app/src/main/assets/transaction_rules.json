{
  "version": "1.3.0",
  "updateTime": "2025-12-07",
  "description": "自动记账规则配置文件 - 支持热更新，添加免密支付、碰一碰、自动扣款等场景",
  "apps": [
    {
      "packageName": "com.tencent.mm",
      "name": "微信",
      "rules": [
        {
          "type": "expense",
          "triggerKeywords": ["支付成功", "付款成功", "已付款", "已支付", "免密支付成功", "已扣款", "扣款成功"],
          "excludeKeywords": ["确认付款", "立即支付", "确认支付", "输入密码", "待支付", "去支付", "支付方式", "付款方式", "请输入"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "收款方[：:]\\s*(.+?)(?:\\s|$)",
            "商户名称[：:]\\s*(.+?)(?:\\s|$)",
            "商户[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "微信支付",
          "priority": 10
        },
        {
          "type": "expense",
          "triggerKeywords": ["自动扣款成功", "已自动扣费", "自动续费成功", "签约扣款成功", "代扣成功"],
          "excludeKeywords": ["开通自动扣款", "签约", "授权"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "扣款方[：:]\\s*(.+?)(?:\\s|$)",
            "商户[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "自动扣款",
          "priority": 12
        },
        {
          "type": "expense",
          "triggerKeywords": [
            "红包发送成功", "红包已发送", "发出红包", "发了一个红包",
            "已发送", "发送成功", "红包已塞好", "已塞钱", "塞好了",
            "发红包成功", "红包已发出", "发出了红包", "红包发出成功",
            "共发出"
          ],
          "excludeKeywords": ["选择红包个数", "请填写金额", "塞钱进红包", "添加表情"],
          "amountRegex": [
            "共\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [],
          "category": "红包",
          "priority": 25
        },
        {
          "type": "expense",
          "triggerKeywords": ["转账成功", "已转账", "转账已发出"],
          "excludeKeywords": ["确认转账", "转账给朋友", "输入金额", "转账说明", "转账到"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [
            "转账给\\s*(.+?)(?:\\s|$)",
            "收款人[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "转账",
          "priority": 15
        },
        {
          "type": "income",
          "triggerKeywords": ["已收钱", "收款成功", "收到转账", "向你转账", "已收款", "转账已收", "收钱成功", "到账成功", "已到账"],
          "excludeKeywords": [],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [
            "(.+?)\\s*向你转账",
            "付款方[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "转账",
          "priority": 15
        },
        {
          "type": "income",
          "triggerKeywords": ["已领取", "领取了", "红包已存入", "红包到账", "已存入零钱", "收到红包", "存入零钱", "你领取了"],
          "excludeKeywords": ["点击领取", "立即领取", "开红包", "看看大家的手气"],
          "amountRegex": [
            "你领取了\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "领取了\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "(.+?)的红包",
            "来自\\s*(.+?)(?:\\s|$)"
          ],
          "category": "红包",
          "priority": 20
        },
        {
          "type": "income",
          "triggerKeywords": ["退款成功", "退款到账", "已退款", "退款已到账"],
          "excludeKeywords": ["申请退款", "退款中"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "¥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "商户[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "退款",
          "priority": 18
        }
      ]
    },
    {
      "packageName": "com.eg.android.AlipayGphone",
      "name": "支付宝",
      "rules": [
        {
          "type": "expense",
          "triggerKeywords": ["支付成功", "付款成功", "交易成功", "免密支付成功", "已扣款", "扣款成功", "小额免密"],
          "excludeKeywords": ["确认付款", "立即付款", "确认支付", "输入密码", "待支付", "去付款"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [
            "收款方[：:]\\s*(.+?)(?:\\s|$)",
            "商家[：:]\\s*(.+?)(?:\\s|$)",
            "商户[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "支付宝支付",
          "priority": 10
        },
        {
          "type": "expense",
          "triggerKeywords": ["自动扣款成功", "已自动扣费", "自动续费成功", "签约扣款成功", "代扣成功", "花呗已还款"],
          "excludeKeywords": ["开通自动扣款", "签约", "授权"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "扣款方[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "自动扣款",
          "priority": 12
        },
        {
          "type": "expense",
          "triggerKeywords": ["转账成功", "转账已完成"],
          "excludeKeywords": ["确认转账", "输入金额"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [
            "收款方[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "转账",
          "priority": 15
        },
        {
          "type": "expense",
          "triggerKeywords": ["红包已发送", "红包发送成功", "发送成功", "已发送", "口令红包已创建", "共发出"],
          "excludeKeywords": ["填写金额", "红包个数", "选择红包"],
          "amountRegex": [
            "共\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [],
          "category": "红包",
          "priority": 25
        },
        {
          "type": "income",
          "triggerKeywords": ["收款成功", "已到账", "收款到账", "到账成功", "收到转账"],
          "excludeKeywords": [],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [
            "付款方[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "支付宝收款",
          "priority": 15
        },
        {
          "type": "income",
          "triggerKeywords": ["红包到账", "红包已存入", "领取成功", "已领取", "已存入余额", "存入余额", "红包已领取"],
          "excludeKeywords": ["点击领取", "立即领取", "开红包", "拆红包"],
          "amountRegex": [
            "领取了\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "(.+?)的红包",
            "来自(.+?)(?:\\s|$)"
          ],
          "category": "红包",
          "priority": 20
        },
        {
          "type": "income",
          "triggerKeywords": ["退款成功", "退款到账", "已退款", "退款已到账"],
          "excludeKeywords": ["申请退款", "退款中"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "商家[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "退款",
          "priority": 18
        }
      ]
    },
    {
      "packageName": "com.unionpay",
      "name": "云闪付",
      "rules": [
        {
          "type": "expense",
          "triggerKeywords": ["支付成功", "交易成功", "付款成功", "碰一碰支付成功", "NFC支付成功", "闪付成功", "挥卡成功", "免密支付成功"],
          "excludeKeywords": ["确认付款", "立即支付", "输入密码", "待支付"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [
            "商户[：:]\\s*(.+?)(?:\\s|$)",
            "收款方[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "云闪付支付",
          "priority": 10
        },
        {
          "type": "expense",
          "triggerKeywords": ["碰一碰", "NFC支付", "闪付"],
          "excludeKeywords": ["如何使用", "开通"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [
            "商户[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "碰一碰",
          "priority": 11
        },
        {
          "type": "expense",
          "triggerKeywords": ["转账成功", "转账已完成", "已转账"],
          "excludeKeywords": ["确认转账", "输入金额"],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [
            "收款方[：:]\\s*(.+?)(?:\\s|$)"
          ],
          "category": "转账",
          "priority": 15
        },
        {
          "type": "expense",
          "triggerKeywords": ["红包已发送", "红包发送成功", "发送成功", "共发出"],
          "excludeKeywords": ["填写金额", "红包个数"],
          "amountRegex": [
            "共\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [],
          "category": "红包",
          "priority": 25
        },
        {
          "type": "income",
          "triggerKeywords": ["收款成功", "到账成功", "已到账", "收到转账"],
          "excludeKeywords": [],
          "amountRegex": [
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "金额[：:]\\s*([0-9,]+(?:\\.[0-9]{1,2})?)"
          ],
          "merchantRegex": [],
          "category": "云闪付收款",
          "priority": 10
        },
        {
          "type": "income",
          "triggerKeywords": ["红包到账", "红包已存入", "领取成功", "已领取"],
          "excludeKeywords": ["点击领取", "立即领取"],
          "amountRegex": [
            "领取了\\s*([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元",
            "￥\\s*([0-9,]+(?:\\.[0-9]{1,2})?)",
            "([0-9,]+(?:\\.[0-9]{1,2})?)\\s*元"
          ],
          "merchantRegex": [],
          "category": "红包",
          "priority": 20
        }
      ]
    }
  ],
  "commonPatterns": {
    "excludePatterns": [
      "^\\d{1,2}[:.:]\\d{2}$"
    ],
    "maxAmount": 50000,
    "minAmount": 0.01
  }
}
